"""
MathCalculator

A high-precision calculator that evaluates a given mathematical expression string and returns its numerical result. It can handle complex arithmetic, parentheses, exponentiation, and common mathematical functions (e.g., sin, cos, log, pi).

Auto-generated by LLM Agent Framework
Generated at: 2025-11-13 14:07:03
"""

import sys
import os
from typing import Dict, Any

# Add parent directory to path
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
from core.tool import Tool

from sympy import sympify, sin, cos, log, pi
from sympy.core.sympify import SympifyError
from typing import Dict, Any

class Tool:
    def __init__(self, name: str, description: str):
        self.name = name
        self.description = description
    
    def execute(self, **kwargs) -> Dict[str, Any]:
        raise NotImplementedError

class MathCalculator(Tool):
    def __init__(self):
        super().__init__(name="MathCalculator", description="A high-precision calculator for evaluating mathematical expressions.")

    def execute(self, expression: str) -> Dict[str, Any]:
        """
        Evaluates a given mathematical expression string and returns its numerical result.

        Args:
            expression (str): The mathematical expression to evaluate.

        Returns:
            Dict[str, Any]: A dictionary containing the result or an error message.
        """
        try:
            # Parse the expression using sympy
            result = sympify(expression).evalf()
            return {"result": float(result)}
        except SympifyError:
            return {"error": "Invalid mathematical expression."}
        except ZeroDivisionError:
            return {"error": "Division by zero encountered."}
        except Exception as e:
            return {"error": str(e)}